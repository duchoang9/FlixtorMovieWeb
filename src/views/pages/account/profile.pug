html(lang="en")
    head
        title #{title} 
        link(href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css", rel="stylesheet")
        link(rel="stylesheet" type="text/css" href="/css/edit-profile.css")
    body
        .container-fluid.row.justify-content-center
        .shadow-lg.border.border-1.rounded-3.p-5.mt-5.w-50
            h1.mt-3.mb-5.text-center Edit Profile
            form#edit-profile-form(method='POST', action='/profile')
            .mb-4.mt-3
                label.mb-2(for='username') Username:
                input#username.form-control(type='text', name='username', value='#{user.user_name}', required)
            .mb-4
                label.mb-2(for='email') Email:
                input#email.form-control(type='email', name='email', value='#{user.email}', required)
            .mb-4
                label.mb-2(for='current-password') Current Password:
                input#current-password.form-control(type='password', name='current-password', required)
            .mb-4
                label.mb-2(for='new-password') New Password:
                input#new-password.form-control(type='password', name='new-password')
            .mb-4
                label.mb-2(for='confirm-new-password') Confirm New Password:
                input#confirm-new-password.form-control(type='password', name='confirm-new-password')
                button.btn.btn-primary.w-100(type='submit') Save Changes
    script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js")
    script(src='https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js')
    script.
        $(document).ready(function() {
        $('#edit-profile-form').submit(function(event) {
        event.preventDefault();
        $.ajax({
        url: '/profile',
        method: 'POST',
        data: $('#edit-profile-form').serialize(),
        success: function(response) {
        alert('Profile updated successfully!');
        setTimeout(function() {
        window.location.href = '/profile';
        }, 1000);
        },
        error: function(xhr, status, error) {
        alert(xhr.responseJSON.message);
        }
        });
        });
        });